#API
На устройстве предостваляется веб-интерфейс для настройки счетчика.
Интерфейс позволяет посмотреть в реальном времени изображение с камеры, а также настройки камеры.
## Методы

### Получить конфигурационный файл
```GET /get_config```

Отдает текущую конфигурацию камеры.

<details>
<summary>Пример ответа</summary>

```json
{
  "camera": {
    "AeEnable": true,
    "ExposureTime": 75000,
    "analogueGain": 1,
    "crop": [
      0,
      1,
      0,
      1
    ],
    "end_zone_part": 0.75,
    "enter_zone_part": 0.65,
    "hflip": 0,
    "horizontal": true,
    "vflip": 0
  },
  "device": {
    "FarmId": "OfficeAgrobit",
    "LineId": 0
  },
  "server": {
    "hostname": "192.168.158.72",
    "port": "5673"
  }
}
```

</details>

### Загрузить конфигурационный файл на устройство
```POST /upload_config```

Нужно загрузить json с файл аналогичный полученному в методе [/get_config](#получить-конфигурационный-файл).

При успешной загрузке файла, на будет возвращен ответ
```json
{ "success": True, "message": "Server is restarting" }
```
Софт на устройстве перезагрузится с новым настройками. Ниже будут описаны настройки.

## Настройки
|Поле| Тип данных| Диапазон значений| Описание|
|---|---|---|---|
|**Camera**| --- |--- |--- |
| AeEnable | bool | true, false | Разрешить автоэспозицию камеры|
| ExposureTime | Int64 | [20000:150000] | Время экспозиции мкс|
| analogueGain| Int64 | [1:10] | Чувствительность камеры. При больших значения будут шумы на изображении|
| crop | Array(float64)[4] | Каждый элемент [0:1]. **crop[0] < crop[1]** и **crop[2] < crop[3]** | Обрезать изображение по рамке [x_слева, x_справа, y_сверху, y_снизу] 
| enter_zone_part | float64 | [0:1] | Начало буферной зоны. Отсчитывается от обрезанного изобрания.
| end_zone_part | float64 | [0:1] | Начало буферной зоны. Отсчитывается от обрезанного изобрания.засчитываться яйцо.
| hflip | bool | true, false | Флип изображения по горизонтали| 
| vflip | bool | true, false | Флип изображения по вертикали|
| horizontal | bool | true, false | Вести подсчте по горизонтали или вертикали? true - по горизонтали, false - по вертикали|
| **device**| ---| ---| ---|
| FarmId| String | --- | Название фабрики|
| LineId| Int64 | --- | Номер линии|
| **server**| ---| ---| --- |
| host| String | IPv4 адрес| IP адрес сервера сбора телеметрии|
| port| Int16 | [0:65535] | порт сервера сбора телеметрии |

